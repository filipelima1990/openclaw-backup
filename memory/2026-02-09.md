# 2026-02-09

## Telegram Chat Routing Fix

**Problem:**
- Personal Telegram messages from Filipe weren't reaching Billie
- `openclaw channels status` showed "not configured, stopped, token:none"
- Even though bot was receiving messages (confirmed via Telegram API), OpenClaw wasn't processing them

**Root Cause:**
- Bindings were using `accountId` instead of `peer` structure
- According to OpenClaw docs, channel routing uses `peer.kind` + `peer.id` format
- Incorrect format:
  ```json
  { "match": { "channel": "telegram", "accountId": "8251137081" } }
  ```
- Correct format:
  ```json
  { "match": { "channel": "telegram", "peer": { "kind": "dm", "id": "8251137081" } }
  ```

**Fix Applied:**
- Updated `channels.telegram` to use `accounts.default.botToken` structure
- Updated bindings array with correct `peer` format:
  - Personal chat: `peer.kind: "dm", peer.id: "8251137081"`
  - Quiz group: `peer.kind: "group", peer.id: "-528990734"`

**Result:**
- ✅ Personal chat working perfectly - two-way communication confirmed
- Messages from Filipe now reach Billie and get responses
- Quiz group still needs new ID (old format doesn't work)

## Quiz Group Status

**Issue:**
- Quiz group ID changed when Telegram upgraded group to supergroup
- Old ID: "-528990734" (doesn't work)
- Needed: New ID starting with "-100..." (supergroup format)
- Quiz system:
  - ✅ Daily quiz sending (9 AM UTC) - working
  - ❌ Answer processing (can't see group messages with old ID)

**Action Required:**
- Filipe needs to forward a message from quiz group to @userinfobot on Telegram
- Get the new group ID (starts with -100...)
- Share with Billie to update configuration
- Then answer polling will work automatically

## Systems Working Today

All automated systems verified:
- ✅ Daily Quiz (sends at 9:00 AM UTC)
- ✅ English Tips (5x daily: 8 AM, 11 AM, 2 PM, 5 PM, 8 PM)
- ✅ Tech News (3x daily: 8 AM, 12 PM, 6 PM)
- ✅ Guitar Practice Tips (8:00 AM daily, rotating categories)
- ✅ Personal Telegram Chat (two-way communication)
- ❌ Quiz Group Answer Processing (waiting for correct group ID)

## Configuration Files Updated

**~/.openclaw/openclaw.json:**
- Added `channels.telegram.accounts.default.botToken`
- Updated bindings to use `peer` structure
- Gateway restarted successfully

**/opt/quiz/poll_answers.py:**
- Updated to check correct quiz group session
- Needs correct group ID to work properly

---

**Notes:**
- All quiz, English tips, tech news, and guitar tips are running via cron
- Personal chat is the primary communication channel with Filipe
- Once quiz group ID is updated, full quiz system will be operational
